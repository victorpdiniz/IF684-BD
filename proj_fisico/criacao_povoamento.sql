-- CRIAÇÃO DAS TABELAS --
CREATE TABLE CLINICA (
    ID_CLINICA NUMBER,
    CNPJ VARCHAR(14) NOT NULL,
    NOME VARCHAR(100) NOT NULL,
    CONSTRAINT PK_CLINICA PRIMARY KEY (ID_CLINICA),
    CONSTRAINT AK_CLINICA_CNPJ UNIQUE (CNPJ)
);

CREATE TABLE UNIDADE (
    ID_UNIDADE NUMBER,
    NOME VARCHAR(100) NOT NULL,
    END_CEP VARCHAR(8) NOT NULL,
    END_CIDADE VARCHAR(50) NOT NULL,
    END_BAIRRO VARCHAR(50) NOT NULL,
    END_RUA VARCHAR(100) NOT NULL,
    END_NUMERO VARCHAR(10) NOT NULL,
    ID_CLINICA NUMBER NOT NULL,
    CONSTRAINT PK_UNIDADE PRIMARY KEY (ID_UNIDADE),
    CONSTRAINT FK_UNIDADE_CLINICA FOREIGN KEY (ID_CLINICA) REFERENCES CLINICA(ID_CLINICA)
);

CREATE TABLE EMAIL (
    ID_UNIDADE NUMBER,
    ENDERECO VARCHAR(100),
    CONSTRAINT PK_EMAIL PRIMARY KEY (ID_UNIDADE, ENDERECO),
    CONSTRAINT FK_EMAIL_UNIDADE FOREIGN KEY (ID_UNIDADE) REFERENCES UNIDADE(ID_UNIDADE)
);

CREATE TABLE FUNCIONARIO (
    CPF VARCHAR(11),
    NOME VARCHAR(100) NOT NULL,
    ID_UNIDADE NUMBER NOT NULL,
    CPF_SUPERVISOR VARCHAR(11),
    CONSTRAINT PK_FUNCIONARIO PRIMARY KEY (CPF),
    CONSTRAINT FK_FUNCIONARIO_UNIDADE FOREIGN KEY (ID_UNIDADE) REFERENCES UNIDADE(ID_UNIDADE),
    CONSTRAINT FK_FUNCIONARIO_SUPERVISOR FOREIGN KEY (CPF_SUPERVISOR) REFERENCES FUNCIONARIO(CPF)
);

CREATE TABLE MEDICO (
    CPF VARCHAR(11),
    CRM VARCHAR(15) NOT NULL,
    CONSTRAINT PK_MEDICO PRIMARY KEY (CPF),
    CONSTRAINT FK_MEDICO_FUNCIONARIO FOREIGN KEY (CPF) REFERENCES FUNCIONARIO(CPF),
    CONSTRAINT AK_MEDICO_CRM UNIQUE (CRM)
);

CREATE TABLE ENFERMEIRO (
    CPF VARCHAR(11),
    COREN VARCHAR(15) NOT NULL,
    CONSTRAINT PK_ENFERMEIRO PRIMARY KEY (CPF),
    CONSTRAINT FK_ENFERMEIRO_FUNCIONARIO FOREIGN KEY (CPF) REFERENCES FUNCIONARIO(CPF),
    CONSTRAINT AK_ENFERMEIRO_COREN UNIQUE (COREN)
);

CREATE TABLE PACIENTE (
    CPF VARCHAR(11),
    CONVENIO VARCHAR(100),
    CONSTRAINT PK_PACIENTE PRIMARY KEY (CPF)
);

CREATE TABLE RECEITA (
    ID_RECEITA NUMBER,
    CPF_MEDICO VARCHAR(11) NOT NULL,
    CPF_PACIENTE VARCHAR(11) NOT NULL,
    CONSTRAINT PK_RECEITA PRIMARY KEY (ID_RECEITA),
    CONSTRAINT FK_RECEITA_MEDICO FOREIGN KEY (CPF_MEDICO) REFERENCES MEDICO(CPF),
    CONSTRAINT FK_RECEITA_PACIENTE FOREIGN KEY (CPF_PACIENTE) REFERENCES PACIENTE(CPF)
);

CREATE TABLE REMEDIO (
    COD NUMBER,
    ID_RECEITA NUMBER NOT NULL,
    CONSTRAINT PK_REMEDIO PRIMARY KEY (COD),
    CONSTRAINT FK_REMEDIO_RECEITA FOREIGN KEY (ID_RECEITA) REFERENCES RECEITA(ID_RECEITA)
);

CREATE TABLE HISTORICO (
    ID_HISTORICO NUMBER,
    ALERGIAS VARCHAR(255),
    DIAGNOSTICOS VARCHAR(255),
    CPF_PACIENTE VARCHAR(11) NOT NULL,
    CONSTRAINT PK_HISTORICO PRIMARY KEY (ID_HISTORICO),
    CONSTRAINT FK_HISTORICO_PACIENTE FOREIGN KEY (CPF_PACIENTE) REFERENCES PACIENTE(CPF),
    CONSTRAINT AK_HISTORICO_PACIENTE UNIQUE (CPF_PACIENTE)
);

CREATE TABLE CONSULTA (
    CPF_MEDICO VARCHAR(11),
    CPF_PACIENTE VARCHAR(11),
    DATA_CONSULTA DATE,
    CONSTRAINT PK_CONSULTA PRIMARY KEY (CPF_PACIENTE, CPF_MEDICO, DATA_CONSULTA),
    CONSTRAINT FK_CONSULTA_PACIENTE FOREIGN KEY (CPF_PACIENTE) REFERENCES PACIENTE(CPF),
    CONSTRAINT FK_CONSULTA_MEDICO FOREIGN KEY (CPF_MEDICO) REFERENCES MEDICO(CPF)
);

CREATE TABLE PROCEDIMENTO (
    ID_PROCEDIMENTO NUMBER,
    CPF_MEDICO VARCHAR(11),
    CPF_PACIENTE VARCHAR(11),
    DATA_CONSULTA DATE,
    CUSTO NUMBER(10, 2) NOT NULL,
    TIPO VARCHAR(100) NOT NULL,
    CPF_ENFERMEIRO VARCHAR(11) NOT NULL,
    CONSTRAINT PK_PROCEDIMENTO PRIMARY KEY (ID_PROCEDIMENTO, CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA),
    CONSTRAINT FK_PROCEDIMENTO_MEDICO FOREIGN KEY (CPF_MEDICO) REFERENCES MEDICO(CPF),
    CONSTRAINT FK_PROCEDIMENTO_PACIENTE FOREIGN KEY (CPF_PACIENTE) REFERENCES PACIENTE(CPF),
    CONSTRAINT FK_PROCEDIMENTO_ENFERMEIRO FOREIGN KEY (CPF_ENFERMEIRO) REFERENCES ENFERMEIRO(CPF)
);

-- POVOAMENTO DAS TABELAS --
INSERT INTO CLINICA (ID_CLINICA, CNPJ, NOME) VALUES (1, '37536071524716', 'Clinica Vida Saudável');
INSERT INTO CLINICA (ID_CLINICA, CNPJ, NOME) VALUES (2, '89559642353805', 'Clinica Bem Estar');
INSERT INTO CLINICA (ID_CLINICA, CNPJ, NOME) VALUES (3, '28692334322194', 'Clinica Cuidar Mais');
INSERT INTO CLINICA (ID_CLINICA, CNPJ, NOME) VALUES (4, '40481755494538', 'Clinica Saúde Total');
INSERT INTO CLINICA (ID_CLINICA, CNPJ, NOME) VALUES (5, '61037287295271', 'Clinica Viva Bem');

INSERT INTO UNIDADE (ID_UNIDADE, NOME, END_CEP, END_CIDADE, END_BAIRRO, END_RUA, END_NUMERO, ID_CLINICA)
VALUES (1, 'Unidade Central', '50010000', 'Recife', 'Boa Vista', 'Rua da Aurora', '123', 1);
INSERT INTO UNIDADE (ID_UNIDADE, NOME, END_CEP, END_CIDADE, END_BAIRRO, END_RUA, END_NUMERO, ID_CLINICA)
VALUES (2, 'Unidade Norte', '50020000', 'Recife', 'Casa Forte', 'Avenida Norte', '456', 2);
INSERT INTO UNIDADE (ID_UNIDADE, NOME, END_CEP, END_CIDADE, END_BAIRRO, END_RUA, END_NUMERO, ID_CLINICA)
VALUES (3, 'Unidade Sul', '50030000', 'Recife', 'Pina', 'Avenida Boa Viagem', '789', 3);
INSERT INTO UNIDADE (ID_UNIDADE, NOME, END_CEP, END_CIDADE, END_BAIRRO, END_RUA, END_NUMERO, ID_CLINICA)
VALUES (4, 'Unidade Oeste', '50040000', 'Recife', 'Cordeiro', 'Rua Cordeiro', '101', 4);
INSERT INTO UNIDADE (ID_UNIDADE, NOME, END_CEP, END_CIDADE, END_BAIRRO, END_RUA, END_NUMERO, ID_CLINICA)
VALUES (5, 'Unidade Leste', '50050000', 'Recife', 'Derby', 'Rua do Derby', '202', 5);

INSERT INTO EMAIL (ID_UNIDADE, ENDERECO) VALUES (1, 'contato@clinica1.com.br');
INSERT INTO EMAIL (ID_UNIDADE, ENDERECO) VALUES (2, 'contato@clinica2.com.br');
INSERT INTO EMAIL (ID_UNIDADE, ENDERECO) VALUES (3, 'contato@clinica3.com.br');
INSERT INTO EMAIL (ID_UNIDADE, ENDERECO) VALUES (4, 'contato@clinica4.com.br');
INSERT INTO EMAIL (ID_UNIDADE, ENDERECO) VALUES (5, 'contato@clinica5.com.br');

INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('68059553607', 'Ana Silva', 1, NULL);
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('19152913996', 'Carlos Souza', 2, '68059553607');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('12657045898', 'Beatriz Lima', 3, '68059553607');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('68595226580', 'Daniel Costa', 4, '19152913996');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('82054772216', 'Eduardo Martins', 5, '12657045898');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('66378226636', 'Fernanda Alves', 1, '68059553607');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('14485019039', 'Gabriel Menezes', 2, '19152913996');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('64328028901', 'Helena Duarte', 3, '12657045898');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('45563256413', 'Igor Santos', 4, '68595226580');
INSERT INTO FUNCIONARIO (CPF, NOME, ID_UNIDADE, CPF_SUPERVISOR) VALUES ('92434126634', 'Juliana Rocha', 5, '82054772216');

INSERT INTO MEDICO (CPF, CRM) VALUES ('12657045898', 'CRM-PE-12345');
INSERT INTO MEDICO (CPF, CRM) VALUES ('19152913996', 'CRM-PE-67890');
INSERT INTO MEDICO (CPF, CRM) VALUES ('66378226636', 'CRM-PE-11111');
INSERT INTO MEDICO (CPF, CRM) VALUES ('45563256413', 'CRM-PE-22222');
INSERT INTO MEDICO (CPF, CRM) VALUES ('92434126634', 'CRM-PE-33333');

INSERT INTO ENFERMEIRO (CPF, COREN) VALUES ('82054772216', 'COREN-PE-11223');
INSERT INTO ENFERMEIRO (CPF, COREN) VALUES ('68595226580', 'COREN-PE-44556');
INSERT INTO ENFERMEIRO (CPF, COREN) VALUES ('14485019039', 'COREN-PE-66778');
INSERT INTO ENFERMEIRO (CPF, COREN) VALUES ('64328028901', 'COREN-PE-88990');
INSERT INTO ENFERMEIRO (CPF, COREN) VALUES ('68059553607', 'COREN-PE-55443');

INSERT INTO PACIENTE (CPF, CONVENIO) VALUES ('14485019039', 'Convênio A');
INSERT INTO PACIENTE (CPF, CONVENIO) VALUES ('64328028901', 'Convênio B');
INSERT INTO PACIENTE (CPF, CONVENIO) VALUES ('45563256413', 'Convênio C');
INSERT INTO PACIENTE (CPF, CONVENIO) VALUES ('92434126634', 'Convênio D');
INSERT INTO PACIENTE (CPF, CONVENIO) VALUES ('68059553607', 'Convênio E');
INSERT INTO PACIENTE (CPF, CONVENIO) VALUES ('19152913996', 'Convênio F');
INSERT INTO PACIENTE (CPF, CONVENIO) VALUES ('66378226636', 'Convênio G');

INSERT INTO RECEITA (ID_RECEITA, CPF_MEDICO, CPF_PACIENTE) VALUES (1, '12657045898', '14485019039');
INSERT INTO RECEITA (ID_RECEITA, CPF_MEDICO, CPF_PACIENTE) VALUES (2, '19152913996', '64328028901');
INSERT INTO RECEITA (ID_RECEITA, CPF_MEDICO, CPF_PACIENTE) VALUES (3, '66378226636', '45563256413');
INSERT INTO RECEITA (ID_RECEITA, CPF_MEDICO, CPF_PACIENTE) VALUES (4, '92434126634', '92434126634');
INSERT INTO RECEITA (ID_RECEITA, CPF_MEDICO, CPF_PACIENTE) VALUES (5, '45563256413', '68059553607');

INSERT INTO REMEDIO (COD, ID_RECEITA) VALUES (1, 1);
INSERT INTO REMEDIO (COD, ID_RECEITA) VALUES (2, 2);
INSERT INTO REMEDIO (COD, ID_RECEITA) VALUES (3, 3);
INSERT INTO REMEDIO (COD, ID_RECEITA) VALUES (4, 4);
INSERT INTO REMEDIO (COD, ID_RECEITA) VALUES (5, 5);

INSERT INTO HISTORICO (ID_HISTORICO, ALERGIAS, DIAGNOSTICOS, CPF_PACIENTE) VALUES (1, 'Nenhuma', 'Saudável', '14485019039');
INSERT INTO HISTORICO (ID_HISTORICO, ALERGIAS, DIAGNOSTICOS, CPF_PACIENTE) VALUES (2, 'Pólen', 'Asma', '64328028901');
INSERT INTO HISTORICO (ID_HISTORICO, ALERGIAS, DIAGNOSTICOS, CPF_PACIENTE) VALUES (3, 'Amendoim', 'Alergia Alimentar', '45563256413');
INSERT INTO HISTORICO (ID_HISTORICO, ALERGIAS, DIAGNOSTICOS, CPF_PACIENTE) VALUES (4, 'Lactose', 'Intolerância Alimentar', '92434126634');
INSERT INTO HISTORICO (ID_HISTORICO, ALERGIAS, DIAGNOSTICOS, CPF_PACIENTE) VALUES (5, 'Nenhuma', 'Diabetes', '68059553607');

INSERT INTO CONSULTA (CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA)
VALUES ('12657045898', '14485019039', TO_DATE('2023-08-01', 'YYYY-MM-DD'));
INSERT INTO CONSULTA (CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA)
VALUES ('19152913996', '64328028901', TO_DATE('2023-08-15', 'YYYY-MM-DD'));
INSERT INTO CONSULTA (CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA)
VALUES ('66378226636', '45563256413', TO_DATE('2023-09-10', 'YYYY-MM-DD'));
INSERT INTO CONSULTA (CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA)
VALUES ('92434126634', '92434126634', TO_DATE('2023-09-25', 'YYYY-MM-DD'));
INSERT INTO CONSULTA (CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA)
VALUES ('45563256413', '68059553607', TO_DATE('2023-10-05', 'YYYY-MM-DD'));

INSERT INTO PROCEDIMENTO (ID_PROCEDIMENTO, CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA, CUSTO, TIPO, CPF_ENFERMEIRO)
VALUES (1, '12657045898', '14485019039', TO_DATE('2023-08-01', 'YYYY-MM-DD'), 200.00, 'Exame de Sangue', '82054772216');
INSERT INTO PROCEDIMENTO (ID_PROCEDIMENTO, CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA, CUSTO, TIPO, CPF_ENFERMEIRO)
VALUES (2, '19152913996', '64328028901', TO_DATE('2023-08-15', 'YYYY-MM-DD'), 150.00, 'Raio-X', '68595226580');
INSERT INTO PROCEDIMENTO (ID_PROCEDIMENTO, CPF_MEDICO, CPF_PACIENTE, DATA_CONSULTA, CUSTO, TIPO, CPF_ENFERMEIRO)
VALUES (3, '66378226636', '45563256413', TO_DATE('2023-09-10', 'YYYY-MM-DD'), 300.00, 'Ultrassom', '14485019039');
